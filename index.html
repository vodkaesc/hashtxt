<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hashtxt </></title>

    <!-- Ubuntu -->
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- JetBrains Mono -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: "#A093EA",
                        accent: "#0DB9D7",
                        noteText: "#7aa2f7"
                    },
                    fontFamily: {
                        ubuntu: ['Ubuntu', 'sans-serif'],
                        jetmono: ['JetBrains Mono', 'ui-monospace', 'monospace']
                    }
                }
            }
        }
    </script>
</head>

<body class="bg-[#1A1B26] font-ubuntu text-primary min-h-screen flex flex-col overflow-hidden">

    <!-- NAVBAR -->
    <nav class="fixed top-0 w-full bg-[#1A1B26] border-b-2 border-accent z-50 h-[48px] sm:h-[40px]">
        <div class="max-w-[1024px] mx-auto h-full px-4 sm:px-5 flex items-center justify-between">

            <a href="/" class="flex items-center gap-2 hover:opacity-80 transition">
                <span class="text-[20px] sm:text-[22px] font-medium">hashtxt</span>
                <span class="text-[16px] sm:text-[18px] font-medium">&lt;/&gt;</span>
            </a>

            <div class="flex items-center gap-5 sm:gap-6">

                <button id="shareBtn" class="text-primary hover:opacity-70 transition">
                    <i class="fa-solid fa-arrow-up-from-bracket text-[18px]"></i>
                </button>

                <a href="https://github.com/vodkaesc/hashtxt" target="_blank" class="text-sm sm:text-base font-medium hover:opacity-70 transition">
                    Github
                </a>

            </div>
        </div>
    </nav>

    <!-- BODY -->
    <main class="flex-1 flex justify-center mt-[56px] sm:mt-[48px] overflow-hidden">
        <div class="w-full max-w-[1024px] px-4 sm:px-5 h-full">
            <textarea
                placeholder="Start writing your note..."
                class="
                    w-full
                    h-full
                    bg-transparent
                    text-noteText
                    text-base sm:text-lg
                    resize-none
                    outline-none
                    border-none
                    placeholder:text-noteText/40
                    font-jetmono
                    leading-relaxed
                "
            ></textarea>
        </div>
    </main>

    <!-- TOAST -->
    <div id="toast"
        class="fixed bottom-5 sm:bottom-6 left-1/2 -translate-x-1/2 bg-primary text-[#1A1B26] px-4 py-2 rounded-md text-sm font-medium opacity-0 pointer-events-none transition duration-300">
        Link copied
    </div>

    <!-- SCRIPT -->
    <script>
        const textarea = document.querySelector("textarea");
        const shareBtn = document.getElementById("shareBtn");
        const toast = document.getElementById("toast");

        function encodeText(text) {
            return btoa(unescape(encodeURIComponent(text)));
        }

        function decodeText(text) {
            try {
                return decodeURIComponent(escape(atob(text)));
            } catch {
                return "";
            }
        }

        // Load from URL
        if (location.hash.length > 1) {
            const hash = location.hash.substring(1);
            textarea.value = decodeText(hash);
        }

        // Update URL on typing
        textarea.addEventListener("input", () => {
            const encoded = encodeText(textarea.value);
            history.replaceState(null, "", "#" + encoded);
        });

        function showToast() {
            toast.classList.remove("opacity-0");
            toast.classList.add("opacity-100");

            setTimeout(() => {
                toast.classList.remove("opacity-100");
                toast.classList.add("opacity-0");
            }, 1800);
        }

        shareBtn.addEventListener("click", async () => {
            await navigator.clipboard.writeText(window.location.href);
            showToast();
        });
    </script>

</body>

</html>